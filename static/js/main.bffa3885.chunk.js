(this.webpackJsonpmemb_chat=this.webpackJsonpmemb_chat||[]).push([[0],{164:function(e,t,n){},165:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),o=(n(164),n(165),n(14)),s=n(262),l=n(264),d=n(75),u=n(151),p=n(265),j=n(30),b=n(259),f=n.p+"static/media/favicon.8d2933b8.ico",h=n(2),g=Object(b.a)((function(){return{appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"},paper:{borderRadius:15,padding:"100px 0",background:"black"},buttonSignup:{fontWeight:"bold",marginTop:20,marginBottom:60,background:"#79CDCD"},buttonLogin:{fontWeight:"bold",marginTop:20,marginBottom:10,background:"#66cd00"},image:{marginLeft:"15px"}}})),m=function(){var e=g(),t=Object(o.g)();return JSON.parse(localStorage.getItem("profile"))&&t.push("/chats"),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsxs)(l.a,{className:e.appBar,position:"fixed",color:"inherit",children:[Object(h.jsx)("img",{src:f,alt:"logo",style:{height:40,marginRight:20}}),Object(h.jsx)(d.a,{className:e.heading,variant:"h4",align:"center",children:"MemB Chat"})]})}),Object(h.jsx)(s.a,{maxWidth:"sm",align:"center",style:{marginTop:50},children:Object(h.jsxs)(u.a,{className:e.paper,children:[Object(h.jsx)(d.a,{style:{fontWeight:"bold",color:"#C2936E"},variant:"h5",align:"center",children:"New User ?"}),Object(h.jsx)(j.c,{style:{textDecoration:"none"},to:"/register",children:Object(h.jsx)(p.a,{className:e.buttonSignup,variant:"contained",size:"large",type:"submit",children:"Sign Up"})}),Object(h.jsx)(d.a,{style:{fontWeight:"bold",marginBottom:60,color:"#C2936E"},variant:"h4",align:"center",children:"OR"}),Object(h.jsx)(d.a,{style:{fontWeight:"bold",color:"#C2936E"},variant:"h5",align:"center",children:"Existing User ?"}),Object(h.jsx)(j.c,{style:{textDecoration:"none"},to:"/login",children:Object(h.jsx)(p.a,{className:e.buttonLogin,variant:"contained",size:"large",type:"submit",children:"Log In"})})]})})]})},x=n(8),O=n.n(x),v=n(15),y=n(19),k=n(52),C=n(281),w=n(272),S=n(282),F=n(271),W=n(274),T=n(25),N=n(5),B=n(266),E=n(267),D=n(224),L=n(268),I=n(270),U=n(135),_=n.n(U),P=n(269),R=Object(b.a)((function(){return{appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"},appBar2:{top:50,display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},image:{marginLeft:"15px"},list:{width:300},fullList:{width:"auto"}}}));function M(e){var t,n=e.chats,c=R(),i=Object(T.b)(),d=Object(o.g)(),u=JSON.parse(localStorage.getItem("profile")),p=function(){window.confirm("Are you sure you wish to Logout")&&(i({type:"LOGOUT"}),d.push("/"))},b=Object(a.useState)(!1),f=Object(y.a)(b,2),g=f[0],m=f[1],x=function(e,t){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&m(t)}};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsxs)(l.a,{position:"fixed",className:c.appBar2,children:[Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(w.a,{onClick:x(0,!0),children:Object(h.jsx)(_.a,{style:{color:"#ffffff"}})}),Object(h.jsx)(S.a,{anchor:"left",open:g,onClose:x(0,!1),children:(t="left",Object(h.jsxs)("div",{className:Object(N.a)(c.list,Object(k.a)({},c.fullList,"top"===t||"bottom"===t)),role:"presentation",onClick:x(0,!1),onKeyDown:x(0,!1),children:[Object(h.jsxs)(B.a,{style:{marginTop:60,marginBottom:60},children:[n.length>0?n.map((function(e,t){var n=(null===e||void 0===e?void 0:e.messages.filter((function(e){return e.name!==u.username&&!e.seen}))).length;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(E.a,{},"divider".concat(e._id)),Object(h.jsxs)(D.a,{button:!0,onClick:function(){d.push("/chats/".concat(e._id))},children:[Object(h.jsx)(L.a,{children:Object(h.jsx)(P.a,{})}),Object(h.jsx)(I.a,{primary:e.participants[0]===u.username?e.participants[1]:e.participants[0]}),n>0?Object(h.jsx)(C.a,{label:n}):Object(h.jsx)(h.Fragment,{})]},e._id)]})})):Object(h.jsx)(D.a,{children:Object(h.jsx)(I.a,{primary:"No chats"})},"noChats"),Object(h.jsx)(E.a,{},"last")]},"chat-list"),Object(h.jsx)(B.a,{style:{position:"fixed",top:0,width:300,background:"black"},children:Object(h.jsxs)(D.a,{children:[Object(h.jsx)(L.a,{children:Object(h.jsx)(P.a,{style:{color:"white"}})}),Object(h.jsx)(I.a,{style:{color:"#ffffff"},primary:u.username})]},"top")},"topTextContainer"),Object(h.jsx)(B.a,{style:{position:"fixed",bottom:0,width:300,background:"black"},children:Object(h.jsxs)(D.a,{button:!0,onClick:p,children:[Object(h.jsx)(I.a,{style:{color:"#ffffff"},primary:"Logout"}),Object(h.jsx)(L.a,{style:{color:"#ffffff"},children:Object(h.jsx)(F.a,{})})]},"btn-logout")},"bottomTextContainer")]},"list-div"))})]},"left"),Object(h.jsx)(w.a,{component:j.b,to:"/search",children:Object(h.jsx)(W.a,{style:{color:"FFFFFF"}})})]})})})}var A=n(145),z=n.n(A),H=n(283),G=n(276),J=n(136),K=n.n(J),V=n(144),q=n.n(V),Q=n(149),X=n(277),Y=n(275),Z=n(137),$=n.n(Z).a.create({baseURL:"https://memb-chat-server.herokuapp.com"}),ee=function(e){return $.post("/auth/signin",e)},te=function(e){return $.post("/auth/signup",e)},ne=function(e){return $.post("/chat/findChat",e)},ae=function(e){return $.get("/chat/".concat(e,"/userChats"))},re=function(e,t){return $.patch("/chat/".concat(e,"/newMessage"),t)},ce=function(e,t){return $.patch("/chat/".concat(e,"/deleteMessage"),{messageId:t})},ie=function(e,t){return $.patch("/chat/".concat(e,"/deleteForMe"),{messageId:t})},oe=function(e,t){return $.patch("/chat/".concat(e,"/messageSeen"),{user:t})},se=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae(e);case 3:a=t.sent,r=a.data,n({type:"USER_CHATS",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},le=function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a){var r,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,re(e,t);case 3:r=n.sent,c=r.data,a({type:"MESSAGE",payload:c}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},de=function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a){var r,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ce(e,t);case 3:r=n.sent,c=r.data,a({type:"MESSAGE",payload:c}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},ue=function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a){var r,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,oe(e,t);case 3:r=n.sent,c=r.data,a({type:"MESSAGE",payload:c}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},pe=n(101),je=n.n(pe);function be(e){var t,n=e.message,r=e.index,c=e.currentUsername,i=e.chatId,o=e.socket,s=e.reciever,l=e.prevDay,d=Object(T.b)(),u=l!==(null===(t=n.date)||void 0===t?void 0:t.slice(0,2)),p=n.name===c?"flex-end":"flex-start",j=n.name===c?"#C2936E":"#F3F3F3",b=Object(a.useState)(null),f=Object(y.a)(b,2),g=f[0],m=f[1],x=c,k=function(){m(null)},S=Boolean(g)?"simple-menu":void 0;return Object(h.jsx)(h.Fragment,{children:(null===n||void 0===n?void 0:n.deleteForMe)?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:u?Object(h.jsx)(C.a,{style:{marginTop:20,marginBottom:20,fontWeight:"bold"},label:n.date}):Object(h.jsx)(h.Fragment,{})},r),Object(h.jsx)("div",{style:{display:"flex",justifyContent:p},children:Object(h.jsxs)("div",{style:{background:j,margin:10,borderRadius:"20px",padding:"1px 20px",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"50%"},children:[Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(h.jsx)("p",{style:{fontSize:".7em",color:"black",fontWeight:"bold"},children:n.name}),n.name===c?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{"aria-controls":"simple-menu","aria-haspopup":"true",style:{color:"black",marginRight:-15},size:"small",onClick:function(e){m(e.currentTarget)},children:Object(h.jsx)(Y.a,{fontSize:"small"})}),Object(h.jsxs)(Q.a,{id:S,anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:k,children:[Object(h.jsx)(X.a,{style:{background:"grey",color:"black",marginTop:-8},onClick:function(){d(function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a){var r,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ie(e,t);case 3:r=n.sent,c=r.data,a({type:"MESSAGE",payload:c}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(i,n._id)),k()},children:"Delete for me"}),Object(h.jsx)(E.a,{style:{background:"black"}}),Object(h.jsx)(X.a,{style:{background:"grey",color:"black",marginBottom:-8},onClick:Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(de(i,n._id));case 2:k(),o.emit("newMessage",{sender:x,reciever:s});case 4:case"end":return e.stop()}}),e)}))),children:"Delete for everyone"})]})]}):Object(h.jsx)(h.Fragment,{})]}),n.media&&""!==n.media?Object(h.jsx)("img",{style:{maxHeight:"30vh",maxWidth:"70vw"},src:n.media,alt:"Broken"}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)("p",{style:{color:"black",fontSize:"1em",fontWeight:"bold",wordWrap:"break-word"},children:n.message}),Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(h.jsx)("p",{style:{color:"black",letterSpacing:0,fontSize:".6em",fontWeight:"bold",wordWrap:"break-word"},children:n.time}),n.name===c?n.seen?Object(h.jsx)(je.a,{fontSize:"small",style:{marginLeft:5,marginTop:5,color:"#008080"}}):Object(h.jsx)(je.a,{fontSize:"small",style:{marginLeft:5,marginTop:5,color:"grey"}}):Object(h.jsx)(h.Fragment,{})]})]})},n._id)]})})}n(219);var fe=n(147),he=n(138),ge=n.n(he),me=n(141),xe=n.n(me),Oe=n(228),ve=n(273),ye=n(225),ke=n(139),Ce=(n(221),Object(b.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"grey",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),margin:20}}})));function we(e){var t=e.setMedia,n=Ce(),r=Object(a.useState)(!1),c=Object(y.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)("https://img.icons8.com/pastel-glyph/64/000000/image-file-add.png"),l=Object(y.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(""),b=Object(y.a)(j,2),f=b[0],g=b[1],m=Object(a.useRef)(d),x=function(){u("https://img.icons8.com/pastel-glyph/64/000000/image-file-add.png"),o(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{onClick:function(){o(!0)},style:{marginTop:15},children:Object(h.jsx)(xe.a,{style:{color:"#ffffff"}})}),Object(h.jsx)(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:n.modal,open:i,onClose:x,closeAfterTransition:!0,BackdropComponent:ve.a,BackdropProps:{timeout:500},children:Object(h.jsx)(ye.a,{in:i,children:Object(h.jsxs)("div",{className:n.paper,children:[Object(h.jsx)("div",{style:{marginBottom:20,display:"flex",justifyContent:"center"},children:"https://img.icons8.com/pastel-glyph/64/000000/image-file-add.png"!==d?Object(h.jsx)(ke.a,{src:d,style:{maxHeight:"50vh",maxWidth:"50vw"},initialAspectRatio:1,guides:!0,crop:function(){var e=null===m||void 0===m?void 0:m.current,t=null===e||void 0===e?void 0:e.cropper;g(t.getCroppedCanvas().toDataURL())},ref:m}):Object(h.jsx)("img",{style:{maxHeight:"30vh",maxWidth:"50vw"},src:d,alt:"Oops!"})}),Object(h.jsx)(ge.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;u(t)}}),Object(h.jsx)(p.a,{disabled:"https://img.icons8.com/pastel-glyph/64/000000/image-file-add.png"===d,style:{marginTop:20,background:"#0063B2",fontWeight:"bold",color:"#ffffff"},fullWidth:!0,onClick:function(){t(f),x()},variant:"contained",children:"done"}),Object(h.jsx)(p.a,{style:{marginTop:20,background:"#b22222",fontWeight:"bold",color:"#ffffff"},fullWidth:!0,onClick:x,variant:"contained",children:"cancel"})]})})})]})}var Se,Fe=n(143),We=n.n(Fe),Te=n(142),Ne=Object(b.a)((function(e){return{list:{width:250},fullList:{width:"auto"},appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Be=[],Ee={},De=[];function Le(){var e,t,n,r,c=Ne(),i=Object(o.h)().id,p=Object(o.g)(),j=Object(T.b)();Be=Object(T.c)((function(e){return e.chats})),Ee=Be.find((function(e){return e._id===i})),De=null===(e=Ee)||void 0===e?void 0:e.messages;var b=Object(a.useState)(""),f=Object(y.a)(b,2),g=f[0],m=f[1],x=Object(a.useState)(""),k=Object(y.a)(x,2),C=k[0],S=k[1],F=Object(a.useState)(null),W=Object(y.a)(F,2),N=W[0],B=W[1],E=JSON.parse(localStorage.getItem("profile"));E||p.push("/");var D=E.username===(null===(t=Ee)||void 0===t?void 0:t.participants[0])?null===(n=Ee)||void 0===n?void 0:n.participants[1]:null===(r=Ee)||void 0===r?void 0:r.participants[0],L=E.username;Object(a.useEffect)((function(){E&&j(se(E.username))}),[]),Object(a.useEffect)((function(){Se=K()("https://memb-chat-server.herokuapp.com"),function(){var e=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=3;break}return e.next=3,j(ue(i,E.username));case 3:Se.emit("seen",D);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i]),Object(a.useEffect)((function(){var e=E.username;Se.on("newMessage",function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r,c,i,o,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.sender,r=n.reciever,!E||r!==e){t.next=11;break}if(a!==(null===(c=Ee)||void 0===c?void 0:c.participants[0])&&a!==(null===(i=Ee)||void 0===i?void 0:i.participants[1])){t.next=9;break}return console.log(null===(o=Ee)||void 0===o?void 0:o.participants[0]),console.log(null===(s=Ee)||void 0===s?void 0:s.participants[1]),console.log(a),t.next=8,j(ue(Ee._id,E.username));case 8:Se.emit("seen",a);case 9:return t.next=11,j(se(e));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Se.on("seen",(function(e){e===E.username&&j(se(E.username))}))}),[]);var I=function(){var e=Object(v.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==g||""!==C){e.next=2;break}return e.abrupt("return");case 2:return t=new Date,n={name:E.username,message:g,media:C,date:t.toLocaleDateString("en-GB"),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},e.next=6,j(le(i,n));case 6:m(""),S(""),Se.emit("newMessage",{sender:L,reciever:D});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Boolean(N),_=U?"simple-popover":void 0;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsx)(l.a,{className:c.appBar,position:"fixed",color:"inherit",children:Object(h.jsx)(d.a,{className:c.heading,variant:"h4",align:"center",children:Ee?Ee.participants[0]===E.username?Ee.participants[1]:Ee.participants[0]:"Chat Room"})})}),Object(h.jsx)(M,{parent:"chatroom",chats:Be}),Object(h.jsxs)(s.a,{maxWidth:"sm",style:{marginTop:55,marginBottom:75,height:"70vh"},children:[i?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Te.a,{forceScroll:"true",children:De.map((function(e,t,n){return Object(h.jsx)(be,{message:e,index:t,currentUsername:E.username,chatId:Ee._id,socket:Se,reciever:Ee.participants[0]===E.username?Ee.participants[1]:Ee.participants[0],prevDay:0===t?-1:n[t-1].date.slice(0,2)},e._id)}))})}):Object(h.jsx)(d.a,{variant:"h4",children:"Click on a chat to start talking"}),""!==C?Object(h.jsx)(l.a,{position:"fixed",style:{top:"auto",bottom:70,background:"black",paddingTop:10,height:"30vh"},children:Object(h.jsx)(s.a,{maxWidth:"sm",style:{display:"flex",justifyContent:"center"},children:Object(h.jsxs)("div",{children:[Object(h.jsx)(w.a,{style:{float:"right",marginBottom:-20},onClick:function(){S("")},size:"small",children:Object(h.jsx)(We.a,{style:{color:"#ffffff"}})}),Object(h.jsx)("img",{style:{maxHeight:"30vh",maxWidth:"90vw"},src:C,alt:"try again"})]})})}):Object(h.jsx)(h.Fragment,{})]}),i?Object(h.jsx)(l.a,{style:{top:"auto",bottom:0,paddingTop:10,paddingBottom:10,height:70,background:"black"},children:Object(h.jsxs)(s.a,{maxWidth:"sm",style:{height:30,display:"flex",flexDirection:"row"},children:[Object(h.jsx)(w.a,{style:{marginTop:15},onClick:function(e){B(e.currentTarget)},children:Object(h.jsx)(q.a,{style:{color:"#ffffff"}})}),Object(h.jsx)(s.a,{children:Object(h.jsx)(u.a,{style:{background:"#ffffff",padding:10,borderRadius:20},children:Object(h.jsx)(H.a,{name:"message",variant:"outlined",autoComplete:"off",fullWidth:!0,placeholder:"Type a message",value:g,onKeyPress:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||I()},onChange:function(e){m(e.target.value)}})})}),Object(h.jsx)(we,{setMedia:S}),Object(h.jsx)(w.a,{onClick:I,style:{marginTop:15},children:Object(h.jsx)(z.a,{style:{color:"#ffffff"}})}),Object(h.jsx)(G.a,{id:_,open:U,anchorEl:N,onClose:function(){B(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(h.jsx)(fe.a,{showPreview:!1,showSkinTones:!1,onSelect:function(e){m((function(t){return t+e.native}))}})})]})}):Object(h.jsx)(h.Fragment,{})]})}var Ie=n(35),Ue=n(226),_e=n(280),Pe=n(278),Re=n(279),Me=n(87),Ae=n.n(Me),ze=n(86),He=n.n(ze),Ge=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee(e);case 3:return a=t.sent,r=a.data,n({type:"AUTH",payload:r}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Je=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te(e);case 3:return a=t.sent,r=a.data,n({type:"AUTH",payload:r}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Ke=Object(b.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{marginTop:10,padding:e.spacing(2),borderRadius:15},form:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),justifyContent:"center"},textField:{marginTop:20},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{fontWeight:"bold",marginTop:50,marginBottom:10,background:"#79CDCD",fontFamily:"Copperplate Papyrus"},buttonLogin:{fontWeight:"bold",marginTop:25,marginBottom:10,color:"#000",textDecoration:"none",fontFamily:"Copperplate Papyrus"},appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"}}})),Ve=function(){var e=Ke(),t=Object(T.b)(),n=Object(o.g)(),r=Object(a.useState)({name:"",username:"",password:"",confPass:""}),c=Object(y.a)(r,2),i=c[0],b=c[1],f=Object(a.useState)(!1),g=Object(y.a)(f,2),m=g[0],x=g[1],C=Object(a.useState)(!1),S=Object(y.a)(C,2),F=S[0],W=S[1],N=function(e){b((function(t){return Object(Ie.a)(Object(Ie.a)({},t),{},Object(k.a)({},e.target.name,e.target.value))}))},B=function(){var e=Object(v.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),x(!0),i.password===i.confPass){e.next=6;break}alert("Passwords do not match"),e.next=14;break;case 6:if(!(i.password.length<8)){e.next=10;break}alert("Password should be atleast 8 digits long"),e.next=14;break;case 10:return e.next=12,t(Je(i));case 12:e.sent?n.push("/chats"):alert("Username is taken. Try another");case 14:x(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsx)(l.a,{className:e.appBar,position:"fixed",color:"inherit",children:Object(h.jsx)(d.a,{className:e.heading,variant:"h4",align:"center",children:"User Login"})})}),Object(h.jsx)(Ue.a,{in:!0,children:Object(h.jsx)(s.a,{maxWidth:"sm",style:{marginTop:50},children:Object(h.jsxs)(u.a,{className:e.paper,children:[Object(h.jsxs)("form",{autoComplete:"off",noValidate:!0,className:e.form,children:[Object(h.jsx)(d.a,{variant:"h6",children:"New User"}),Object(h.jsx)(_e.a,{className:e.textField,name:"name",variant:"outlined",label:"Name",fullWidth:!0,value:i.name,onChange:N}),Object(h.jsx)(_e.a,{className:e.textField,name:"username",variant:"outlined",label:"Username",fullWidth:!0,value:i.username,onChange:N}),Object(h.jsx)(_e.a,{className:e.textField,name:"password",variant:"outlined",label:"Password",type:F?"text":"password",fullWidth:!0,value:i.password,onChange:N,InputProps:{endAdornment:Object(h.jsx)(Pe.a,{position:"end",children:Object(h.jsx)(w.a,{onClick:function(){W((function(e){return!e}))},children:F?Object(h.jsx)(He.a,{}):Object(h.jsx)(Ae.a,{})})})}}),Object(h.jsx)(_e.a,{className:e.textField,name:"confPass",variant:"outlined",type:"password",label:"Confirm Password",fullWidth:!0,value:i.confPass,onChange:N}),Object(h.jsx)(p.a,{className:e.buttonSubmit,variant:"contained",size:"large",type:"submit",fullWidth:!0,onClick:B,children:"Create User"}),Object(h.jsx)(d.a,{className:e.buttonLogin,component:j.b,to:"/login",variant:"body1",size:"large",type:"submit",children:"Already have an account ? Login here"})]}),m?Object(h.jsx)(Re.a,{}):Object(h.jsx)(h.Fragment,{})]})})})]})},qe=Object(b.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{marginTop:10,padding:e.spacing(2),borderRadius:15},form:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),justifyContent:"center"},textField:{marginTop:20},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{fontWeight:"bold",marginTop:50,background:"#79CDCD",fontFamily:"Copperplate Papyrus"},buttonGoogle:{fontWeight:"bold",marginTop:50,background:"light grey",fontFamily:"Copperplate Papyrus"},buttonSignup:{fontWeight:"bold",marginTop:25,marginBottom:10,color:"#000",fontFamily:"Copperplate Papyrus",textDecoration:"none"},appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"}}})),Qe=function(){var e=qe(),t=Object(T.b)(),n=Object(o.g)(),r=Object(a.useState)({username:"",password:""}),c=Object(y.a)(r,2),i=c[0],b=c[1],f=Object(a.useState)(!1),g=Object(y.a)(f,2),m=g[0],x=g[1],C=Object(a.useState)(!1),S=Object(y.a)(C,2),F=S[0],W=S[1],N=function(e){b((function(t){return Object(Ie.a)(Object(Ie.a)({},t),{},Object(k.a)({},e.target.name,e.target.value))}))},B=function(){var e=Object(v.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),x(!0),console.log(i),e.next=5,t(Ge(i));case 5:e.sent?n.push("/chats"):alert("Invalid Login Credentials"),x(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsx)(l.a,{className:e.appBar,position:"fixed",color:"inherit",children:Object(h.jsx)(d.a,{className:e.heading,variant:"h4",align:"center",children:"User Login"})})}),Object(h.jsx)(Ue.a,{in:!0,children:Object(h.jsx)(s.a,{maxWidth:"sm",style:{marginTop:50},children:Object(h.jsxs)(u.a,{className:e.paper,children:[Object(h.jsxs)("form",{autoComplete:"off",noValidate:!0,className:e.form,children:[Object(h.jsx)(d.a,{variant:"h6",children:"Enter Login Details"}),Object(h.jsx)(_e.a,{className:e.textField,name:"username",variant:"outlined",label:"Username",fullWidth:!0,value:i.username,onChange:N}),Object(h.jsx)(_e.a,{className:e.textField,name:"password",variant:"outlined",type:F?"text":"password",label:"Password",fullWidth:!0,value:i.password,onChange:N,InputProps:{endAdornment:Object(h.jsx)(Pe.a,{position:"end",children:Object(h.jsx)(w.a,{onClick:function(){W((function(e){return!e}))},children:F?Object(h.jsx)(He.a,{}):Object(h.jsx)(Ae.a,{})})})}}),Object(h.jsx)(p.a,{className:e.buttonSubmit,variant:"contained",size:"large",fullWidth:!0,onClick:B,children:"Login"}),Object(h.jsx)(d.a,{variant:"body1",position:"end",className:e.buttonSignup,component:j.b,to:"/register",children:"New User ? Signup here"})]}),m?Object(h.jsx)(Re.a,{}):Object(h.jsx)(h.Fragment,{})]})})})]})},Xe=Object(b.a)((function(e){return{icons:{padding:e.spacing(0,2),pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},appBar:{display:"flex",padding:10,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"black"},heading:{color:"#C2936E",fontWeight:"bold"}}})),Ye=function(){var e=Object(T.b)(),t=Xe(),n=Object(o.g)(),r=JSON.parse(localStorage.getItem("profile"));r||n.push("/");var c=r.username,i=Object(a.useState)(""),j=Object(y.a)(i,2),b=j[0],f=j[1],g=[];Object(a.useEffect)((function(){e(function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.get("/auth");case 3:n=e.sent,a=n.data,t({type:"FETCH_USERS",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),(g=Object(T.c)((function(e){return e.auth}))).length>0&&(g=g.filter((function(e){return e.username&&e.name&&(e.username.toLowerCase().includes(b.toLowerCase())||e.name.toLowerCase().includes(b.toLowerCase()))})));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{maxWidth:"lg",style:{height:30},children:Object(h.jsx)(l.a,{className:t.appBar,position:"fixed",color:"inherit",children:Object(h.jsx)(d.a,{className:t.heading,variant:"h4",align:"center",children:"Search Users"})})}),Object(h.jsx)(Ue.a,{in:!0,children:Object(h.jsx)(l.a,{style:{position:"fixed",top:50,alignItems:"center",background:"black",padding:20},children:Object(h.jsxs)(u.a,{style:{padding:10,display:"flex"},children:[Object(h.jsx)("div",{className:t.icons,children:Object(h.jsx)(W.a,{})}),Object(h.jsx)(H.a,{autoComplete:"off",placeholder:"Search\u2026",classes:{root:t.inputRoot},name:"query",value:b,onChange:function(e){f(e.target.value)},inputProps:{"aria-label":"search"}})]})})}),Object(h.jsx)(s.a,{maxWidth:"sm",style:{marginTop:135,marginBottom:65},children:b?0===g.length?Object(h.jsx)(d.a,{variant:"h5",align:"center",children:"No Matches"}):g.map((function(e){return Object(h.jsx)(u.a,{id:e._id,style:{background:"black",marginTop:10,borderRadius:50,display:"flex",padding:10},children:Object(h.jsxs)(p.a,{style:{textTransform:"lowercase"},onClick:Object(v.a)(O.a.mark((function t(){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c,e.username),t.prev=1,t.next=4,ne([c,e.username]);case 4:a=t.sent,r=a.data,n.push("/chats/".concat(r._id)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),children:[Object(h.jsx)("div",{className:t.icons,children:Object(h.jsx)(P.a,{style:{color:"#ffffff"}})}),Object(h.jsx)(d.a,{variant:"body1",align:"center",style:{color:"#ffffff",marginRight:10},children:e.username}),Object(h.jsxs)(d.a,{variant:"body1",align:"center",style:{color:"#ffffff"},children:["(",e.name,")"]})]})})})):Object(h.jsx)(h.Fragment,{})})]})};var Ze=function(){return Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",component:m}),Object(h.jsx)(o.b,{exact:!0,path:"/chats/",component:Le}),Object(h.jsx)(o.b,{exact:!0,path:"/chats/:id",component:Le}),Object(h.jsx)(o.b,{exact:!0,path:"/login",component:Qe}),Object(h.jsx)(o.b,{exact:!0,path:"/register",component:Ve}),Object(h.jsx)(o.b,{exact:!0,path:"/search",component:Ye}),Object(h.jsx)(o.a,{to:"/"})]})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,284)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},et=n(56),tt=n(146),nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(Ie.a)({},null===t||void 0===t?void 0:t.payload))),Object(Ie.a)(Object(Ie.a)({},e),{},{authData:null===t||void 0===t?void 0:t.payload});case"FETCH_USERS":return t.payload;case"LOGOUT":return localStorage.clear(),Object(Ie.a)(Object(Ie.a)({},e),{},{authData:null});default:return e}},at=n(148),rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_CHATS":return t.payload;case"FIND_CHAT":var n=e.findIndex((function(e){return e._id===(null===t||void 0===t?void 0:t.payload._id)}));return-1===n?[].concat(Object(at.a)(e),[null===t||void 0===t?void 0:t.payload]):e.splice(n,1).push(null===t||void 0===t?void 0:t.payload);case"MESSAGE":return e.map((function(e){return e._id===(null===t||void 0===t?void 0:t.payload._id)?t.payload:e}));default:return e}},ct=Object(et.c)({auth:nt,chats:rt}),it=Object(et.e)(ct,Object(et.d)(Object(et.a)(tt.a)));i.a.render(Object(h.jsx)(j.a,{children:Object(h.jsx)(T.a,{store:it,children:Object(h.jsx)(Ze,{})})}),document.getElementById("root")),$e()}},[[222,1,2]]]);
//# sourceMappingURL=main.bffa3885.chunk.js.map